# README-w32.txt $Revision$ $Date$

                S Y L P H E E D   -   C L A W S   /   W I N 3 2
               ==================================================

These are the necessary steps to compile sylpheed-claws using Microsofts
VisualC++ 6.0 or MinGW/GCC in a Win32 environment.
Please note, that these ports are in a very early development state:

 !     MANY FEATURES ARE UNAVAILABE, MAY CRASH OR EVEN DESTROY YOUR DATA     !
 !        PLEASE USE THESE PROGRAMS ONLY FOR TESTING OR DEVELOPMENT          !
 !            IF YOU USE THESE PROGRAMS, BE SURE TO MAKE BACKUPS             !

The main part of porting Sylpheed to Windows was done by Munesato Nakada
<munesato@post.co.jp>. This english installation help and the Sylpheed-Claws
port are derived from his work by Thorsten Maerz <torte@netztorte.de>.


1. Sylpheed-Claws Win32 branch:
-------------------------------
First get the libraries and install everything as described below. Then call
"patch_claws.bat" (in \dev\proj\win32) to create necessary files using some
unix tools (bison, sed, ...). Repeat this step after each "cvs update".


2. Get following packages:
--------------------------
All packages are mirrored at the Sylpheed-Claws homepage. Please refer
to the link section below.

* Sylpheed sourcecode:
    sylpheed-sources            (075claws17_snapshot_020511.zip or cvs checkout)
* Gtk+ libraries:
    glib-dev                    (glib-dev-2.0.0-20020310.zip)
    gtk+-dev                    (gtk+-dev-1.3.0-20020310.zip)
    libiconv-dev                (libiconv-dev-1.7.zip)
    libintl                     (libintl-0.10.40-20020101.zip)
* Support libraries:
    libjconv                    (libjconv-2.8.1.tar.gz)
    fnmatch                     (fnmatch-dev-20020306.lzh)
    libcompface                 (libcompface-dev-20020306.lzh)
    regex                       (regex-dev-20020306.lzh)
    w32lib                      (w32lib-dev-20020921.zip)
    gpgme                       (gpgme-dev-20020921.zip)
    openssl                     (claws_w32_ssl_dev_020415.zip)
    libcrypt			(crypt-2.2.5-lib.zip)
    pthreads			(pthreads-2002-11-04.exe)
* unix build tools (diff,patch,msgfmt,grep,sed,bison,flex,cvs)
    unix-tools                  (unix-tools.zip)


3. Create the source tree:
--------------------------

  1. Create \dev.
  2. Extract glib-dev, gtk+-dev, libiconv-dev, libintl, libcrypt,
     pthreads directly into \dev (this creates \dev\lib, \dev\include, etc.).
  3. Extract or checkout the sources into \dev\lib\proj\sylpheed-claws.
  4. Extract fnmatch, libcompface, regex, w32lib to \dev\proj
     (creates \dev\proj\fnmatch, etc.).
  5. Extract libjconv to \dev\proj\sylpheed.


4. The resulting directory tree:
--------------------------------

\-dev                      (Gtk+ libs, libcrypt, pthreads below \dev)
  +---bin
  +---include
  |   +---openssl          (extract openssl-dev to \ )
  |   +---glib-2.0
  |   +---gtk
  |   \---gdk
  +---lib
  |   +---glib-2.0
  |   +---pkgconfig
  |   \---gtk+
  +---share
  +---man
  +---doc
  \---proj                 (other libs and sylpheed below \dev\proj\)
      +---fnmatch
      |   \---src
      +---libcompface
      |   \---src
      +---regex
      |   \---src
      +---w32lib
      |   \---src
      +---gpgme
      \---sylpheed-claws   (standard sylpheed assumes MSVC project files here)
          +---ac
          +---faq
          +---intl
          +---libjconv     (The only support-lib installed here)
          +---manual
          +---po
          +---src
          +---files
          \---win32        (MSVC project files for sylpheed-claws)
              +---patches  (generated.diff, external bugfixes, etc.)
              +---apps     (optional: unix build utilities)

5. Building:
------------
  1. Change directory to \dev\proj\win32 .
  2. Create the autogenerated files using "patch_claws.bat"

  --- MS Visual C++ ---
  * To compile from the commandline, call "mk_ALL.bat".
  * To compile using the MSVC IDE, open either "sylpheed-claws_d.dsw" or
     "sylpheed-claws.dsw".
     - Make sure, that *.dsp and *.dsw files have DOS lineendings (CRLF).
     - Make sure, the correct target ("Release" or "Debug") is set in the
       project properties when selecting sylpheed-claws.dsw or
       sylpheed-claws_d.dsw, otherwise the linker complains about libc
       problems.

  --- MinGW GCC ---
  Edit "Makefile" and set DEBUGVERSION, GCCVERSION, CYGWIN and UNIXTOOLS
  according to your build environment.
  Afterwards, invoke "make".


6. Hints:
---------
* Before opening the project, some files have to be created by calling
  "patch_claws.bat" in \dev\proj\sylpheed-claws\win32. This will create
  version.h, some bison/flex generated files and the translations.
  You will need the files from unix-tools.zip or a running cygwin
  installation for this step.
* libjconv and glib need patches, when compiled from source. As libjconv
  is rather small, the patched version is provided with the source.
  The patch for glib (2.0.0 and 2.0.1) is available in "win32\patches".


7. Links:
---------
Sylpheed-Claws for Win32:
by Thorsten Maerz <torte@netztorte.de>
http://claws-w32.sourceforge.net

Sylpheed forWin32 :
by Munesato Nakada (NAK) <munesato@post.co.jp>
http://www2.odn.ne.jp/munesato/sylpheed

Original Sylpheed :
by Hiroyuki Yamamoto <hiro-y@kcn.ne.jp>
http://sylpheed.good-day.net

Sylpheed-Claws homepage :
http://sylpheed-claws.sourceforge.net

Gtk+ / Win32 homepage :
by Tor Lillqvist (tml) <tml@iki.fi>
http://www.gimp.org/~tml/gimp/win32

